{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}首页{% endblock %}—Blog wanpeng‘s博客系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <!--<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.css" media="screen">-->
    <script src={% static 'js/jquery.js' %}></script>
    <script src={% static 'js/bootstrap.js' %}></script>

    {% block extra_head %}
    {% endblock %}

    <style>
    .post {
        margin-bottom: 5px;
    }
    html,
    body{
        height: 100%;
        width: 100%;
        margin:0;
        padding:0;
    }
    #container{
        min-width: 100%;
        min-height: 100%;
        height:auto !important;
        margin:0 auto -60px;
        {#position: relative;#}
    }
    .push
    footer{
        height:60px;
        {#bottom:0;#}
        {#position: absolute;#}
        width: 100%;
    }
    </style>
  </head>

  <body>
      <div class="container-fluid" id="container" style="background-image: url('{% static "img/b.jpg" %}');background-repeat: no-repeat;background-size: 100% 100%">
        <div class="container-fluid head">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
              <a class="navbar-brand" href="/">首页</a>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">

              <!--分类-->
                <ul class="navbar-nav mr-auto">
                {% for cate in nav_category %}    <!---->
                  <li class="nav-item">
                      <a class="nav-link" href="{% url 'category-list' cate.id %}">{{ cate.name }}</a>
                  </li>
                {% endfor %}
                </ul>

              <!--搜索-->
                <form class="form-inline" action='/search/' method='GET'>
                    <input class="form-control" type="search" name="keyword" placeholder="Search" aria-label="Search" value="{{ keyword }}">
                  <button class="btn btn-outline-success" type="submit">搜索</button>
                </form>

              <!--注册-->
                <ul class="navbar-nav">
                    {% if request.is_login %}
    {#                {% get_notifications_count user 'false' as msgnum %}#}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false" title="{{ request.user_name }}，欢迎回来！">
    {#                        {% if msgnum > 0%}#}
    {#                        <span class="get-msg text-center">{{ msgnum }}</span>#}
    {#                        {% endif %}#}
    {#                        {% get_user_avatar_tag user %}#}
                        </a>
                        <div class="dropdown-menu dropdown-menu-right mt-0 rounded-0 border-0" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item pl-3" href={% url 'user:userdetail' request.user_id 'lasted' %}><i class="fa fa-fw fa-user text-info mr-2"></i>个人资料</a>
                            {% if request.is_staff %}
                            <a class="dropdown-item pl-3" href="/admin"><i
                                    class="fa fa-fw fa-key text-info mr-2"></i>后台管理</a>
                            {% endif %}
    {#                        <a class="dropdown-item pl-3" href="{% url 'comment:notification' %}"><i class="fa fa-fw fa-bell text-info mr-2"></i>消息#}
    {#                            {% if msgnum > 0%}#}
    {#                            <span class="badge badge-warning ml-3 text-center">{{ msgnum }}</span>#}
    {#                            {% endif %}#}
    {#                        </a>#}
                            <a class="dropdown-item pl-3" href={% url 'user:logout' %}><i
                                    class="fa fa-fw fa-sign-out text-info mr-2"></i>退出</a>
                        </div>
                    </li>
                    {% else %}
                    <li class="nav-item mr-2">
                        <a class="nav-link py-md-3" href="{% url 'user:login' %}?next={{ request.path }}">登录</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link py-md-3" href="{% url 'user:register' %}?next={{ request.path }}">注册</a>
                    </li>
                    {% endif %}
                </ul>

              </div>
            </nav>

        {% block pagefirst %}
            <div class="jumbotron">
                <h1 class="display-4">Blog</h1>
                <p class="lead">基于Django的多人博客系统</p>
            </div>
        {% endblock %}

        </div>


         {% block other %}  <!--登陆界面处-->
         {% endblock %}   <!---->


        {% block main %}
        <div class="container-fluid main">
            <div class="row">
                <div class="col-8 post-list">
                {% block left %}  <!---->
                {% endblock %}   <!---->
                </div>

                <div class="col-4">
                    {% block right %}  <!---->
                    {% endblock %}
                </div>
            </div>
        </div>
        {% endblock %}

        <div class="push"></div>
      </div>


    <footer class="footer">
        {% block footer %}
        <div class="container-fluid">
            <hr/>
            <nav class="nav category">
            {% for cate in normal_category %} <!---->
            <a href="{% url 'category-list' cate.id %}" class="nav-link">{{ cate.name }}</a>
            {% endfor %}
            </nav>
        </div>
        <div class="container-fluid power">
            <span class="text-muted">Power by Blog@wanpeng</span>
        </div>
        {% endblock %}
    </footer>

  </body>
</html>
